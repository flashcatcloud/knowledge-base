---
title: "Android RUM SDK Data Collection"
description: "Learn about the data types and attributes collected by the Flashcat Android RUM SDK."
date: "2024-05-09T10:00:00+08:00"
url: "https://docs.flashcat.cloud/en/flashduty/rum/android-data-collected"
---

## Overview

Flashcat Android RUM SDK collects multiple metrics and attributes by default for all RUM events. You can also add custom attributes to extend the default data set.

## Application Startup

Flashcat collects the following metrics from app startup:

| Metric                      | Description                                                                                                 |
| --------------------------- | ----------------------------------------------------------------------------------------------------------- |
| **cold_start_duration**     | Cold start duration: time from app process creation to first Activity rendering completion.                 |
| **warm_start_duration**     | Warm start duration: app process already exists, time from Activity start to rendering completion.          |
| **hot_start_duration**      | Hot start duration: both app and Activity are in memory, time from Activity resume to rendering completion. |
| **activity_start_duration** | Activity start duration: time from `onCreate` to first frame rendering completion.                          |
| **is_pre_warmed**           | Boolean indicating whether the app was started through pre-warming (Android 11+).                           |

Startup type descriptions:

- **Cold start**: First launch of the app or launch after process termination. Requires loading all resources and initializing app state.
- **Warm start**: App process is in memory, but Activity needs to be recreated.
- **Hot start**: Both app and Activity are in memory, only need to bring Activity to foreground.

## View Monitoring and App Lifecycle

A View represents a unique screen that users see in the app. Each View start creates a new RUM event, which is updated throughout the View's lifecycle. Views collect information about all resources, actions, errors, and long tasks that occur during their lifecycle.

In Android, Activities and Fragments are considered Views. By default, the SDK uses the following strategies to automatically track Views:

- **ActivityViewTrackingStrategy**: Tracks each Activity as a View based on Activity lifecycle.
- **FragmentViewTrackingStrategy**: Tracks each Fragment as a View based on Fragment lifecycle.
- **MixedViewTrackingStrategy**: Tracks both Activities and Fragments simultaneously.
- **NavigationViewTrackingStrategy**: Tracking strategy for Jetpack Navigation component.

You can also manually call `RumMonitor.startView()` and `RumMonitor.stopView()` to customize View tracking.

## Default Attributes

Flashcat RUM SDK attaches the following default attributes to all events. These attributes help you understand user device, network status, and app context.

### Common Core Attributes

| Attribute Name        | Type   | Description                                                            |
| --------------------- | ------ | ---------------------------------------------------------------------- |
| `application.id`      | string | Flashcat application ID.                                               |
| `application.name`    | string | App package name (e.g., `com.example.app`).                            |
| `application.version` | string | App version name.                                                      |
| `application.build`   | string | App build version number.                                              |
| `session.id`          | string | Unique session ID used to group events in a user journey.              |
| `session.type`        | string | Session type: `user`.                                                  |
| `view.id`             | string | Unique ID generated for each View.                                     |
| `view.url`            | string | Normalized URL of the View (Activity or Fragment class name).          |
| `view.name`           | string | Customizable View name.                                                |
| `env`                 | string | App environment name (e.g., `prod`, `dev`).                            |
| `service`             | string | Service name used to distinguish different modules or microservices.   |
| `version`             | string | App version.                                                           |
| `sdk_version`         | string | Flashcat SDK version.                                                  |
| `date`                | number | Event timestamp (epoch milliseconds).                                  |
| `type`                | string | Event type (e.g., `view`, `resource`, `action`, `error`, `long_task`). |

### Device Attributes

The following device-related attributes are automatically collected for all RUM events:

| Attribute Name          | Type   | Description                                          |
| ----------------------- | ------ | ---------------------------------------------------- |
| `device.type`           | string | Device type, such as `mobile`, `tablet`, `tv`, etc.  |
| `device.name`           | string | Device commercial name (e.g., `Samsung Galaxy S21`). |
| `device.model`          | string | Device model (e.g., `SM-G991B`).                     |
| `device.brand`          | string | Device brand (e.g., `Samsung`).                      |
| `device.architecture`   | string | Device architecture (e.g., `arm64-v8a`).             |
| `device.marketing_name` | string | Marketing name of the device.                        |

### Connectivity Attributes

The following network-related attributes are automatically collected for all RUM events:

| Attribute Name                       | Type   | Description                                                                  |
| ------------------------------------ | ------ | ---------------------------------------------------------------------------- |
| `connectivity.status`                | string | Device network reachability status (`connected`, `not_connected`, `maybe`).  |
| `connectivity.interfaces`            | array  | List of available network interfaces (e.g., `wifi`, `cellular`, `ethernet`). |
| `connectivity.cellular.technology`   | string | Cellular network technology type (e.g., `LTE`, `5G`).                        |
| `connectivity.cellular.carrier_name` | string | Carrier name (e.g., `China Mobile`).                                         |

### Operating System Attributes

The following OS-related attributes are automatically collected for all RUM events:

| Attribute Name     | Type   | Description                                    |
| ------------------ | ------ | ---------------------------------------------- |
| `os.name`          | string | Operating system name (e.g., `Android`).       |
| `os.version`       | string | Operating system version (e.g., `13`).         |
| `os.version_major` | string | OS major version number (e.g., `13`).          |
| `os.build`         | string | System build number (e.g., `TQ2A.230505.002`). |

### Geolocation Attributes

Flashcat RUM can infer geolocation information from the user's IP address:

| Attribute Name    | Type   | Description       |
| ----------------- | ------ | ----------------- |
| `geo.country`     | string | Country name.     |
| `geo.country_iso` | string | Country ISO code. |
| `geo.city`        | string | City name.        |

**Note**: Geolocation information is inferred by the Flashcat backend from the client IP address and does not collect precise GPS location on the client.

### Global User Attributes

You can set user information through the `setUser()` API, which will be attached to all RUM events:

| Attribute Name | Type   | Description             |
| -------------- | ------ | ----------------------- |
| `usr.id`       | string | Unique user identifier. |
| `usr.name`     | string | User-friendly name.     |
| `usr.email`    | string | User email address.     |

You can also add custom user attributes, such as `usr.plan`, `usr.role`, etc.

## Event-Specific Attributes

Besides default attributes, different types of RUM events also collect specific metrics and attributes.

### Session Attributes

| Attribute Name       | Type   | Description                                            |
| -------------------- | ------ | ------------------------------------------------------ |
| `session.id`         | string | Unique session ID.                                     |
| `session.type`       | string | Session type: `user`.                                  |
| `session.has_replay` | bool   | Whether the session includes session replay recording. |
| `session.is_active`  | bool   | Whether the session is active.                         |

### View Attributes

View events include the following specific attributes and performance metrics:

| Attribute Name                | Type       | Description                                                                |
| ----------------------------- | ---------- | -------------------------------------------------------------------------- |
| `view.id`                     | string     | Unique ID for each View.                                                   |
| `view.name`                   | string     | Custom name for the View.                                                  |
| `view.url`                    | string     | URL of the View (Activity or Fragment class name).                         |
| `view.time_spent`             | number(ns) | Time spent by the user on this View.                                       |
| `view.loading_time`           | number(ns) | Time required for View loading to complete.                                |
| `view.loading_type`           | string     | View loading type: `initial_load`, `activity_display`, `fragment_display`. |
| `view.first_contentful_paint` | number(ns) | First contentful paint time (API 29+ only).                                |
| `view.action.count`           | number     | Count of all actions collected in the View.                                |
| `view.resource.count`         | number     | Count of all resources collected in the View.                              |
| `view.error.count`            | number     | Count of all errors collected in the View.                                 |
| `view.long_task.count`        | number     | Count of all long tasks collected in the View.                             |
| `view.crash.count`            | number     | Count of all crashes collected in the View.                                |
| `view.is_active`              | bool       | Whether the View is still active.                                          |

### Resource Attributes

Resource events represent network requests in the app. Collected attributes include:

| Attribute Name                 | Type       | Description                                                                           |
| ------------------------------ | ---------- | ------------------------------------------------------------------------------------- |
| `resource.id`                  | string     | Unique identifier for the resource.                                                   |
| `resource.type`                | string     | Resource type (e.g., `xhr`, `fetch`, `image`, `css`, `js`, `font`, `media`, `other`). |
| `resource.url`                 | string     | URL of the resource.                                                                  |
| `resource.method`              | string     | HTTP method (e.g., `GET`, `POST`).                                                    |
| `resource.status_code`         | number     | HTTP response status code.                                                            |
| `resource.duration`            | number(ns) | Total time spent loading the resource.                                                |
| `resource.size`                | number     | Resource size (bytes).                                                                |
| `resource.dns.duration`        | number(ns) | DNS resolution time (`domainLookupEnd - domainLookupStart`).                          |
| `resource.connect.duration`    | number(ns) | Time to establish connection (`connectEnd - connectStart`).                           |
| `resource.ssl.duration`        | number(ns) | TLS handshake time (`connectEnd - secureConnectionStart`), HTTPS only.                |
| `resource.first_byte.duration` | number(ns) | Time waiting for first byte response (`responseStart - requestStart`).                |
| `resource.download.duration`   | number(ns) | Time downloading response (`responseEnd - responseStart`).                            |
| `resource.redirect.duration`   | number(ns) | Time spent on subsequent HTTP redirects (`redirectEnd - redirectStart`).              |
| `resource.provider.name`       | string     | Resource provider name, defaults to `unknown`.                                        |
| `resource.provider.domain`     | string     | Resource provider domain.                                                             |
| `resource.provider.type`       | string     | Resource provider type (e.g., `first-party`, `cdn`, `ad`, `analytics`).               |

### Error Attributes

Frontend errors are collected through RUM, and error messages and stack traces (if available) are included:

| Attribute Name   | Type   | Description                                                               |
| ---------------- | ------ | ------------------------------------------------------------------------- |
| `error.source`   | string | Error source (e.g., `webview`, `logger`, `network`, `source`, `console`). |
| `error.type`     | string | Error type or error code.                                                 |
| `error.message`  | string | Concise, human-readable one-line error message.                           |
| `error.stack`    | string | Stack trace or supplemental information about the error.                  |
| `error.issue_id` | string | Unique identifier for the error issue.                                    |
| `error.category` | string | High-level categorization of errors. Possible values: `ANR`, `Exception`. |
| `error.file`     | string | File name where the error occurred (for error tracking issues).           |
| `error.line`     | number | Line number where the error occurred.                                     |
| `error.is_crash` | bool   | Indicates whether this error caused an app crash.                         |

#### Network Errors

Network errors include information about failed HTTP requests and collect the following attributes:

| Attribute Name                   | Type   | Description                                                             |
| -------------------------------- | ------ | ----------------------------------------------------------------------- |
| `error.resource.status_code`     | number | HTTP response status code.                                              |
| `error.resource.method`          | string | HTTP method (e.g., `POST`, `GET`).                                      |
| `error.resource.url`             | string | Resource URL.                                                           |
| `error.resource.provider.name`   | string | Resource provider name, defaults to `unknown`.                          |
| `error.resource.provider.domain` | string | Resource provider domain.                                               |
| `error.resource.provider.type`   | string | Resource provider type (e.g., `first-party`, `cdn`, `ad`, `analytics`). |

### Action Timing Attributes

Actions represent user interactions with the app (e.g., taps, swipes, scrolls).

| Attribute Name           | Type       | Description                              |
| ------------------------ | ---------- | ---------------------------------------- |
| `action.loading_time`    | number(ns) | Loading time for the action.             |
| `action.long_task.count` | number     | Count of all long tasks for this action. |
| `action.resource.count`  | number     | Count of all resources for this action.  |
| `action.error.count`     | number     | Count of all errors for this action.     |

### Action Attributes

| Attribute Name       | Type   | Description                                                                 |
| -------------------- | ------ | --------------------------------------------------------------------------- |
| `action.id`          | string | UUID for the user action.                                                   |
| `action.type`        | string | User action type (e.g., `tap`, `scroll`, `swipe`, `application_start`).     |
| `action.name`        | string | Name of the user action.                                                    |
| `action.target.name` | string | Element the user interacted with, only for automatically collected actions. |

## Data Storage

Before data is uploaded to Flashcat, it is stored in plain text in the app's cache directory. This cache folder is protected by Android app sandboxing, meaning that on most devices, other apps cannot read this data. However, if the mobile device is rooted or someone tampers with the Linux kernel, stored data may become readable.

**Storage location**: `/data/data/<package_name>/cache/com.flashcat.rum/`

**Note**: Sensitive data should not be included in RUM events, or should be obfuscated or filtered before sending through the `beforeSend` callback.

## Data Upload

Flashcat RUM Android SDK considers user bandwidth impact while ensuring data transmission. The SDK uploads events in batches as follows:

### Batching Mechanism

1. **When collecting events**:  
   Flashcat SDK appends uncompressed events to batch files (using TLV encoding format, Tag-Length-Value).

2. **When uploading** (when a batch is considered "closed"):
   - Read batch file and extract events
   - Deduplicate RUM events (remove redundant View events; other traces are not optimized)
   - Build trace-specific payloads
   - Compress payloads and send

### Upload Trigger Conditions

Batches are uploaded under the following conditions:

- Batch file size reaches threshold (e.g., 4MB)
- Number of events in batch reaches threshold
- App switches to background
- Periodic upload (e.g., every 5 seconds)

### Upload Strategy

- **When network is available**: Prioritize upload via WiFi, mobile network also supported.
- **When battery is sufficient**: Ensure not to excessively consume device battery.
- **Retry on failure**: If upload fails, batches are retained locally until successfully sent.

### Data Compression

Before upload, Flashcat SDK performs gzip compression on batch data to reduce network traffic and upload time.

## Direct Boot Mode Support

If your app supports Direct Boot mode (starts before device unlock), note that data captured before device unlock will **not be recorded** as credential encrypted storage is not yet available.

Flashcat SDK will start collecting data after device unlock. If you need to collect data in Direct Boot mode, ensure device encrypted storage is used instead of credential encrypted storage.

## Further Reading

- [Android SDK Integration Guide](https://docs.flashcat.cloud/en/flashduty/rum/android-sdk-integration): Learn how to integrate the Android SDK
- [Android SDK Advanced Configuration](https://docs.flashcat.cloud/en/flashduty/rum/android-advanced-configuration): Learn how to configure advanced SDK features
- [RUM Analysis Dashboard](https://docs.flashcat.cloud/en/flashduty/rum/analysis-dashboard): View and analyze RUM data
