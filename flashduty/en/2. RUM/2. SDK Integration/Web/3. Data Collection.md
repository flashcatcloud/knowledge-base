---
title: "Web RUM Data Collection"
description: "This document details the FlashCat Web RUM SDK data collection mechanism, including event types, attributes, metrics, and data storage information."
date: "2024-05-09T10:00:00+08:00"
url: "https://docs.flashcat.cloud/en/flashduty/rum/web-data-collected"
---

## Overview

FlashCat Web RUM SDK generates events with associated metrics and attributes. Each RUM event includes default attributes, such as the page URL corresponding to the event (`view.url`) and user information like device type (`device.type`) and country (`geo.country`).

Additionally, different event types have specific additional metrics and attributes. For example, the `view.loading_time` metric is associated with view events, while the `resource.method` attribute is associated with resource events.

## Default Attributes

FlashCat Web RUM SDK automatically captures the following default attributes, which apply to all RUM event types.

### Common Core Attributes

| Attribute        | Type   | Description                                                            |
| ---------------- | ------ | ---------------------------------------------------------------------- |
| `date`           | Integer | Event timestamp (in milliseconds, epoch milliseconds).                 |
| `type`           | String | Event type (such as `session`, `view`, `resource`, `error`, `action`). |
| `application.id` | String | Unique application identifier.                                         |
| `service`        | String | Service name that generated this event.                                |
| `env`            | String | Application environment name (such as `prod`, `dev`, `staging`).       |
| `version`        | String | Application version.                                                   |
| `sdk_version`    | String | FlashCat RUM SDK version.                                              |

### Device

The following device-related attributes are automatically attached to all events collected by FlashCat:

| Attribute      | Type   | Description                                                      |
| -------------- | ------ | ---------------------------------------------------------------- |
| `device.type`  | String | Device type (such as `Desktop`, `Mobile`, `Tablet`, `TV`, `Other`). |
| `device.brand` | String | Device brand (such as `Apple`, `Samsung`, `Huawei`).            |
| `device.model` | String | Device model (such as `iPhone`, `iPad`).                         |
| `device.name`  | String | Device commercial name.                                          |

### Operating System

The following OS-related attributes are automatically attached to all events collected by FlashCat:

| Attribute          | Type   | Description                                        |
| ------------------ | ------ | -------------------------------------------------- |
| `os.name`          | String | Operating system name (such as `Mac OS`, `Windows`, `iOS`). |
| `os.version`       | String | OS version number (such as `10.15.7`, `11.0`).     |
| `os.version_major` | String | OS major version number (such as `10`, `11`).      |

### Browser

The following browser-related attributes are automatically attached to all Web RUM events:

| Attribute                 | Type   | Description                                                |
| ------------------------- | ------ | ---------------------------------------------------------- |
| `browser.name`            | String | Browser name (such as `Chrome`, `Firefox`, `Safari`, `Edge`). |
| `browser.version`         | String | Browser version number (such as `91.0.4472.124`).          |
| `browser.version_major`   | String | Browser major version number (such as `91`).               |
| `browser.user_agent`      | String | User Agent string.                                         |
| `browser.viewport.width`  | Number | Browser viewport width (pixels).                           |
| `browser.viewport.height` | Number | Browser viewport height (pixels).                          |

### Geolocation

The following attributes relate to the geographic location of the IP address:

| Attribute                 | Type   | Description                                                  |
| ------------------------- | ------ | ------------------------------------------------------------ |
| `geo.country`             | String | Country name.                                                |
| `geo.country_iso_code`    | String | Country ISO code (such as `US`, `CN`).                       |
| `geo.country_subdivision` | String | First-level administrative division of the country (such as US states, Chinese provinces). |
| `geo.continent_code`      | String | Continent ISO code (such as `EU`, `AS`, `NA`).              |
| `geo.continent`           | String | Continent name.                                              |
| `geo.city`                | String | City name.                                                   |

**Note**: Geolocation information is inferred by the FlashCat backend from the client IP address and does not collect precise GPS location on the client.

### Global User Attributes

You can enable user tracking on all RUM events to correlate user sessions and simplify troubleshooting. User attributes are optional, but it's recommended to provide the following:

| Attribute   | Type   | Description                                                       |
| ----------- | ------ | ----------------------------------------------------------------- |
| `usr.id`    | String | Unique user identifier.                                           |
| `usr.name`  | String | User-friendly name, displayed by default in RUM UI.              |
| `usr.email` | String | User email address. Email is displayed if no username is provided. |

You can also add custom user attributes, such as `usr.plan`, `usr.role`, etc.

To set user information, see [Tracking User Information](./1.%20SDK%20Integration.md#tracking-user-information).

## Event-Specific Attributes

Different event types have specific attributes and metrics.

### Session Attributes

| Attribute                   | Type    | Description                             |
| --------------------------- | ------- | --------------------------------------- |
| `session.id`                | String  | Unique session identifier.              |
| `session.type`              | String  | Session type (such as `user`, `synthetic`). |
| `session.is_active`         | Boolean | Whether the session is active.          |
| `session.initial_view.id`   | String  | ID of the initial view in the session.  |
| `session.initial_view.url`  | String  | URL of the initial view in the session. |
| `session.initial_view.name` | String  | Name of the initial view in the session. |
| `session.last_view.id`      | String  | ID of the last view in the session.     |
| `session.last_view.url`     | String  | URL of the last view in the session.    |
| `session.last_view.name`    | String  | Name of the last view in the session.   |
| `session.has_replay`        | Boolean | Whether session replay is enabled for the session. |

### View Time Metrics

FlashCat RUM collects all performance metrics from the [Navigation Timing API](https://www.w3.org/TR/navigation-timing/), as well as metrics related to [Core Web Vitals](https://web.dev/vitals/).

| Attribute                             | Type               | Description                                                                                                                |
| ------------------------------------- | ------------------ | -------------------------------------------------------------------------------------------------------------------------- |
| `view.time_spent`                     | Number (nanoseconds) | Time user spent on this view.                                                                                            |
| `view.loading_time`                   | Number (nanoseconds) | Time required for page to fully load (triggered at `loadEventEnd`).                                                      |
| `view.largest_contentful_paint`       | Number (nanoseconds) | Largest Contentful Paint (LCP), rendering time of largest visible content element in viewport.                           |
| `view.first_input_delay`              | Number (nanoseconds) | First Input Delay (FID), time from user's first interaction with page to browser's actual response.                      |
| `view.cumulative_layout_shift`        | Number             | Cumulative Layout Shift (CLS), quantifies unexpected movement of visible elements within viewport.                        |
| `view.interaction_to_next_paint`      | Number (nanoseconds) | Interaction to Next Paint (INP), measures latency of all user interactions with page.                                    |
| `view.first_contentful_paint`         | Number (nanoseconds) | First Contentful Paint (FCP), time when browser first renders any text, image, non-blank canvas, or SVG.                 |
| `view.dom_interactive`                | Number (nanoseconds) | Moment parser completes work on main document (`domInteractive`).                                                         |
| `view.dom_content_loaded`             | Number (nanoseconds) | Time when initial HTML document is fully loaded and parsed, without waiting for stylesheets, images, and subframes to finish loading (`domContentLoadedEventEnd`). |
| `view.dom_complete`                   | Number (nanoseconds) | Time when page and all subresources are ready (`domComplete`).                                                            |
| `view.load_event`                     | Number (nanoseconds) | Time when load event is triggered (`loadEventEnd`), indicating page is fully loaded.                                      |
| `view.first_byte`                     | Number (nanoseconds) | Time to First Byte (TTFB), time from user initiating page load to browser receiving first byte of HTML document (`responseStart`). |
| `view.redirect.duration`              | Number (nanoseconds) | Time spent on redirects (`redirectEnd - redirectStart`).                                                                  |
| `view.dns.duration`                   | Number (nanoseconds) | Time spent on DNS lookup (`domainLookupEnd - domainLookupStart`).                                                        |
| `view.connect.duration`               | Number (nanoseconds) | Time spent establishing server connection (`connectEnd - connectStart`).                                                  |
| `view.ssl.duration`                   | Number (nanoseconds) | Time spent on TLS handshake (`connectEnd - secureConnectionStart`).                                                       |
| `view.request.duration`               | Number (nanoseconds) | Time spent requesting HTML document (`responseStart - requestStart`).                                                     |
| `view.response.duration`              | Number (nanoseconds) | Time spent downloading HTML document (`responseEnd - responseStart`).                                                     |
| `view.in_foreground_periods.count`    | Number             | Number of times view was in foreground.                                                                                   |
| `view.in_foreground_periods.duration` | Number (nanoseconds) | Total time view was in foreground.                                                                                        |

### View Attributes

| Attribute              | Type    | Description                         |
| ---------------------- | ------- | ----------------------------------- |
| `view.id`              | String  | Unique view identifier.             |
| `view.url`             | String  | URL of the view.                    |
| `view.name`            | String  | Customizable view name.             |
| `view.referrer`        | String  | Previous page URL (referrer).       |
| `view.action.count`    | Number  | Number of user actions collected in this view. |
| `view.error.count`     | Number  | Number of errors collected in this view. |
| `view.resource.count`  | Number  | Number of resources collected in this view. |
| `view.long_task.count` | Number  | Number of long tasks collected in this view. |
| `view.is_active`       | Boolean | Whether the view is active.         |

### Resource Time Metrics

FlashCat RUM collects detailed network timing information from the [Resource Timing API](https://www.w3.org/TR/resource-timing-2/) for individual resource loading.

| Attribute                         | Type               | Description                                                                                    |
| --------------------------------- | ------------------ | ---------------------------------------------------------------------------------------------- |
| `resource.duration`               | Number (nanoseconds) | Total time required to load the resource.                                                    |
| `resource.size`                   | Number (bytes)     | Resource size.                                                                                 |
| `resource.connect.duration`       | Number (nanoseconds) | Time required to establish server connection (`connectEnd - connectStart`).                 |
| `resource.ssl.duration`           | Number (nanoseconds) | Time required for TLS handshake. This metric doesn't appear if last request wasn't via HTTPS. |
| `resource.dns.duration`           | Number (nanoseconds) | Time required for DNS resolution (`domainLookupEnd - domainLookupStart`).                   |
| `resource.redirect.duration`      | Number (nanoseconds) | Time required for subsequent HTTP requests (`redirectEnd - redirectStart`).                 |
| `resource.first_byte.duration`    | Number (nanoseconds) | Time waiting to receive first response byte (`responseStart - requestStart`).               |
| `resource.download.duration`      | Number (nanoseconds) | Time downloading response (`responseEnd - responseStart`).                                   |
| `resource.render_blocking_status` | String             | Resource render blocking status (`blocking`, `non-blocking`).                                  |
| `resource.first_party`            | Boolean            | Whether it's a first-party resource (same domain as app).                                      |

### Resource Attributes

| Attribute                  | Type   | Description                                                                     |
| -------------------------- | ------ | ------------------------------------------------------------------------------- |
| `resource.id`              | String | Unique resource identifier.                                                     |
| `resource.type`            | String | Resource type (such as `xhr`, `fetch`, `css`, `js`, `image`, `font`, `media`). |
| `resource.method`          | String | HTTP method (such as `GET`, `POST`, `PUT`, `DELETE`).                          |
| `resource.status_code`     | Number | HTTP response status code.                                                      |
| `resource.url`             | String | Resource URL.                                                                   |
| `resource.url_host`        | String | Host portion of the URL.                                                        |
| `resource.url_path`        | String | Path portion of the URL.                                                        |
| `resource.url_query`       | Object | URL query parameters, parsed as key-value pairs.                                |
| `resource.url_scheme`      | String | URL protocol (such as `https`, `http`).                                         |
| `resource.provider.name`   | String | Resource provider name, defaults to `unknown`.                                  |
| `resource.provider.domain` | String | Resource provider domain.                                                       |
| `resource.provider.type`   | String | Resource provider type (such as `first-party`, `cdn`, `ad`, `analytics`, `social`). |

### GraphQL Attributes

If GraphQL request tracking is enabled, the following attributes are attached to `resource` events:

| Attribute                         | Type   | Description                                                                                        |
| --------------------------------- | ------ | -------------------------------------------------------------------------------------------------- |
| `resource.graphql.operation_type` | String | GraphQL operation type (`query`, `mutation`, `subscription`).                                      |
| `resource.graphql.operation_name` | String | GraphQL operation name (if provided in request).                                                   |
| `resource.graphql.variables`      | String | GraphQL variables sent with request.                                                               |
| `resource.graphql.payload`        | String | GraphQL query (limited to 32 KB, only available when `trackPayload` is enabled).                   |
| `resource.graphql.errors_count`   | Number | Number of errors returned in GraphQL response (only available when `trackResponseErrors` is enabled). |
| `resource.graphql.errors`         | Array  | GraphQL errors array, including message, code, locations, and path (only available when `trackResponseErrors` is enabled). |

### Long Task Time Attributes

Long tasks are tasks that block the main thread for 50 milliseconds or longer. These tasks cause high input latency, slow interactions, or stuttering animations/scrolling.

| Attribute                   | Type               | Description                                        |
| --------------------------- | ------------------ | -------------------------------------------------- |
| `long_task.duration`        | Number (nanoseconds) | Duration of the long task.                       |
| `long_task.is_frozen_frame` | Boolean            | Whether it's a frozen frame (duration exceeds 700ms). |

### Error Attributes

Frontend errors are collected through RUM. Error messages and stack traces (if available) are included.

| Attribute              | Type   | Description                                                                                                    |
| ---------------------- | ------ | -------------------------------------------------------------------------------------------------------------- |
| `error.id`             | String | Unique error identifier.                                                                                       |
| `error.source`         | String | Error source (such as `console`, `network`, `source`, `logger`, `agent`, `webview`, `custom`, `report`).      |
| `error.type`           | String | Error type (error code in some cases).                                                                         |
| `error.message`        | String | Concise, readable single-line error message.                                                                   |
| `error.stack`          | String | Error stack trace or supplemental information.                                                                 |
| `error.issue_id`       | String | Unique error issue identifier (same errors are aggregated to the same issue).                                  |
| `error.fingerprint`    | String | Fingerprint used to uniquely identify the error.                                                               |
| `error.handling`       | String | Error handling method (`handled`, `unhandled`).                                                                |
| `error.handling_stack` | String | Stack trace when error was handled.                                                                            |
| `error.causes`         | Array  | Information about other errors that caused this error.                                                         |

#### Source Errors

Source errors contain code-level information about the error. For more information on different error types, see the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error).

| Attribute    | Type   | Description                     |
| ------------ | ------ | ------------------------------- |
| `error.type` | String | Error type (error code in some cases). |

#### Network Errors

Network errors contain information about failed HTTP requests. The following additional attributes are collected:

| Attribute                        | Type   | Description                                                      |
| -------------------------------- | ------ | ---------------------------------------------------------------- |
| `error.resource.status_code`     | Number | HTTP response status code.                                       |
| `error.resource.method`          | String | HTTP method (such as `GET`, `POST`).                             |
| `error.resource.url`             | String | Resource URL.                                                    |
| `error.resource.url_host`        | String | Host portion of the URL.                                         |
| `error.resource.url_path`        | String | Path portion of the URL.                                         |
| `error.resource.url_scheme`      | String | URL protocol.                                                    |
| `error.resource.provider.name`   | String | Resource provider name, defaults to `unknown`.                   |
| `error.resource.provider.domain` | String | Resource provider domain.                                        |
| `error.resource.provider.type`   | String | Resource provider type (such as `first-party`, `cdn`, `ad`, `analytics`). |

### Action Time Attributes

| Attribute                | Type               | Description                                                                                    |
| ------------------------ | ------------------ | ---------------------------------------------------------------------------------------------- |
| `action.loading_time`    | Number (nanoseconds) | Action loading time. Calculation method in [Tracking User Actions documentation](./1.%20SDK%20Integration.md#tracking-user-actions). |
| `action.long_task.count` | Number             | Number of long tasks triggered by this action.                                                 |
| `action.resource.count`  | Number             | Number of resources triggered by this action.                                                  |
| `action.error.count`     | Number             | Number of errors triggered by this action.                                                     |

### Action Attributes

| Attribute            | Type   | Description                                                                                                  |
| -------------------- | ------ | ------------------------------------------------------------------------------------------------------------ |
| `action.id`          | String | Unique user action identifier (UUID).                                                                        |
| `action.type`        | String | User action type (such as `click`, `custom`). For custom user actions, set to `custom`.                     |
| `action.target.name` | String | Element user interacted with. Only for automatically collected actions.                                     |
| `action.name`        | String | User-friendly name (such as `Click on #checkout`). For custom user actions, the action name given in API call. |

### Frustration Signals

FlashCat RUM automatically detects user frustration signals to help you understand issues users encounter in the app.

| Attribute                             | Type   | Description                                                |
| ------------------------------------- | ------ | ---------------------------------------------------------- |
| `session.frustration.count`           | Number | Total number of frustration signals in the session.        |
| `view.frustration.count`              | Number | Total number of frustration signals in the view.           |
| `action.frustration.type:dead_click`  | String | Dead click detected by RUM SDK (click with no response).   |
| `action.frustration.type:rage_click`  | String | Rage click detected by RUM SDK (consecutive rapid clicks). |
| `action.frustration.type:error_click` | String | Error click detected by RUM SDK (click triggers error).    |

### UTM Attributes

If URL contains UTM parameters, FlashCat RUM automatically captures the following attributes for tracking marketing campaigns:

| Attribute                     | Type   | Description                                                               |
| ----------------------------- | ------ | ------------------------------------------------------------------------- |
| `view.url_query.utm_source`   | String | Parameter in URL tracking traffic source.                                 |
| `view.url_query.utm_medium`   | String | Parameter in URL tracking which channel traffic came from.                |
| `view.url_query.utm_campaign` | String | Parameter in URL identifying specific marketing campaign associated with view. |
| `view.url_query.utm_content`  | String | Parameter in URL identifying specific element user clicked in marketing campaign. |
| `view.url_query.utm_term`     | String | Parameter in URL tracking keywords user searched to trigger given campaign. |

## Data Storage

Before uploading to FlashCat, data is temporarily stored in plain text in the browser's local storage (LocalStorage or SessionStorage). The SDK follows these rules:

- When network is available, data is sent in batches.
- If network is unavailable or data upload fails, batches are retained until successfully sent.
- Data exceeding a certain time limit is automatically cleaned up to avoid occupying excessive storage space.

This means data won't be lost even if users use your app while offline.

**Note**: Sensitive data should not be included in RUM events, or should be obfuscated or filtered before sending through the `beforeSend` callback.

## Data Upload

FlashCat Web RUM SDK uploads collected events in batches to the server to optimize network performance and reduce impact on user experience.

### Batching Mechanism

1. **Event Collection**: SDK adds events to in-memory batch buffer.
2. **Batch Upload**: Batches are uploaded when one of the following conditions is met:
   - Number of events in batch reaches threshold
   - Batch size reaches threshold
   - Periodic upload (e.g., every 10 seconds)
   - Page unload (`beforeunload` event)

### Upload Strategy

- **Beacon API**: Prioritizes using [Beacon API](https://developer.mozilla.org/en-US/docs/Web/API/Beacon_API) to send data, ensuring data isn't lost during page unload.
- **XHR/Fetch Fallback**: If Beacon API is unavailable, uses XMLHttpRequest or Fetch API.
- **Retry on Failure**: If upload fails, batches are retained in local storage until successfully sent.

### Data Compression

Before upload, FlashCat SDK compresses batch data to reduce network traffic and upload time.

## Privacy and Compliance

FlashCat Web RUM SDK is designed with privacy and data protection in mind:

- **IP Address Anonymization**: SDK can be configured to anonymize IP addresses.
- **Sensitive Data Filtering**: Use `beforeSend` callback to filter or obfuscate sensitive information.
- **Cookie and Storage Control**: Can configure whether to use cookies and local storage.
- **GDPR/CCPA Compliance**: Supports user privacy opt-out mechanism.

For more information on privacy configuration, see [Advanced Configuration](./2.%20Advanced%20Configuration.md).

## More Information

- [Web SDK Integration](./1.%20SDK%20Integration.md): Learn how to integrate FlashCat RUM SDK in Web apps
- [Web SDK Advanced Configuration](./2.%20Advanced%20Configuration.md): Learn how to configure advanced SDK features
- [RUM Data Collection](../../8.%20Others/2.%20Data%20Collection.md): Learn about RUM general data collection mechanism
