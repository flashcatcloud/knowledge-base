---
title: "iOS RUM SDK Integration Guide"
description: "This document provides detailed instructions on how to integrate the FlashCat RUM SDK into iOS applications."
date: "2024-05-09T10:00:00+08:00"
url: "https://docs.flashcat.cloud/en/flashduty/rum/ios-sdk-integration"
---

## Overview

FlashCat iOS RUM SDK supports iOS 12.0, iPadOS 12.0, tvOS 12.0 and above. By integrating the SDK, you can monitor your iOS application's performance, errors, and user behavior in real-time.

## Integration Steps

### Step 1: Add SDK Dependencies

FlashCat iOS SDK supports installation via Swift Package Manager.

1. In Xcode, open your project and select **File > Add Package Dependencies**
2. Enter the FlashCat SDK Git repository URL in the search bar:
   ```
   https://github.com/flashcat-cloud/fc-ios-sdk
   ```
3. Select the desired version or branch
4. In **Add to Target**, select your application target
5. Add the following package dependencies:
   - `FlashcatCore`: Core SDK
   - `FlashcatRUM`: RUM functionality module

### Step 2: Retrieve Application Information from the Console

In the **RUM Application Management** page of the FlashCat console:

1. Create or select an iOS application
2. Obtain the following information:
   - **Application ID**: Application unique identifier
   - **Client Token**: Client access token

### Step 3: Initialize SDK

Initialize the FlashCat SDK in the `application(_:didFinishLaunchingWithOptions:)` method of your `AppDelegate.swift`:

```swift
import UIKit
import FlashcatCore

@main
class AppDelegate: UIResponder, UIApplicationDelegate {
    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {

        Flashcat.initialize(
            with: Flashcat.Configuration(
                clientToken: "<CLIENT_TOKEN>",
                env: "<ENV_NAME>",
            ),
            trackingConsent: .granted
        )

        return true
    }
}
```

#### Initialization Parameters

- **clientToken**: Client token retrieved from the FlashCat console (required)
- **env**: Environment name, such as `production`, `staging` (required)
- **site**: Data reporting site, options: `.us1`, `.us3`, `.us5`, `.eu1`, `.ap1` (required)
- **trackingConsent**: User tracking consent status, options:
  - `.pending`: SDK starts collecting and batching data but does not send to FlashCat, waiting for new tracking consent value
  - `.granted`: SDK starts collecting data and sending to FlashCat
  - `.notGranted`: SDK does not collect any data

You can dynamically modify the tracking consent status after initialization through `Flashcat.set(trackingConsent:)`.

### Step 4: Enable RUM Features and Start Sending Data

Configure and enable RUM features. It is recommended to enable them as early as possible in `AppDelegate`:

```swift
import FlashcatRUM

RUM.enable(
    with: RUM.Configuration(
        applicationID: "<RUM_APPLICATION_ID>",
        uiKitViewsPredicate: DefaultUIKitRUMViewsPredicate(),
        uiKitActionsPredicate: DefaultUIKitRUMActionsPredicate(),
        swiftUIViewsPredicate: DefaultSwiftUIRUMViewsPredicate(),
        swiftUIActionsPredicate: DefaultSwiftUIRUMActionsPredicate(isLegacyDetectionEnabled: true),
        urlSessionTracking: RUM.Configuration.URLSessionTracking()
    )
)
```

#### RUM Configuration Parameters

- **applicationID**: RUM application ID retrieved from the console
- **uiKitViewsPredicate**: UIKit view tracking strategy
- **uiKitActionsPredicate**: UIKit user action tracking strategy
- **swiftUIViewsPredicate**: SwiftUI view tracking strategy
- **swiftUIActionsPredicate**: SwiftUI user action tracking strategy
- **urlSessionTracking**: URLSession network request tracking configuration

### Step 5: Track Network Events

#### Enable URLSession Tracking

To monitor network requests sent from `URLSession` instances, you need to enable `URLSessionInstrumentation` and pass in your delegate class type:

```swift
import FlashcatRUM

URLSessionInstrumentation.enable(
    with: .init(
        delegateClass: YourSessionDelegate.self
    )
)

let session = URLSession(
    configuration: .default,
    delegate: YourSessionDelegate(),
    delegateQueue: nil
)
```

After configuration, the SDK automatically tracks all network requests, including:

- Request URL, method, status code
- Request and response header information
- Request duration and data size
- Network error information

**Note**: Only network requests initiated when a view is active will be tracked.

## View Tracking

FlashCat iOS SDK supports automatic tracking of UIKit and SwiftUI views.

### UIKit View Automatic Tracking

UIKit views are automatically tracked through the default `DefaultUIKitRUMViewsPredicate`. The SDK tracks the lifecycle of `UIViewController`, automatically recording view display and hiding.

### SwiftUI View Tracking

For SwiftUI applications, you need to manually add tracking code to the view:

```swift
import SwiftUI
import FlashcatRUM

struct ProductView: View {
    var body: some View {
        VStack {
            Text("Product Details")
            // Your view content
        }
        .trackRUMView(name: "Product")
    }
}
```

The `trackRUMView(name:)` method automatically starts and stops view tracking when the SwiftUI view appears and disappears.

### Custom View Tracking

If you need more fine-grained control, you can manually track views:

```swift
import FlashcatRUM

// Start tracking a view
RUMMonitor.shared().startView(key: "view-key", name: "View Name", attributes: [:])

// Stop tracking a view
RUMMonitor.shared().stopView(key: "view-key", attributes: [:])
```

## User Action Tracking

### UIKit Action Automatic Tracking

User actions in UIKit (such as button clicks, switch toggles, etc.) are automatically tracked through `DefaultUIKitRUMActionsPredicate`.

### SwiftUI Action Tracking

For SwiftUI controls, you can add the `.trackRUMTapAction(name:)` modifier:

```swift
import SwiftUI
import FlashcatRUM

struct CheckoutView: View {
    var body: some View {
        Button("Complete Purchase") {
            // Button action
        }
        .trackRUMTapAction(name: "Purchase")
    }
}
```

**Note**: Using `.trackRUMTapAction(name:)` inside `List` may affect default gestures (for example, disabling `Button` actions or breaking `NavigationLink`). For `List` elements, it is recommended to use the custom action API.

### Custom Action Tracking

Manually track user actions:

```swift
import FlashcatRUM

RUMMonitor.shared().addAction(
    type: .tap,
    name: "Button Tapped",
    attributes: ["button_id": "submit"]
)
```

## Track iOS Errors

FlashCat iOS SDK automatically captures application crashes and uncaught exceptions. You can also manually record errors:

```swift
import FlashcatRUM

RUMMonitor.shared().addError(
    message: "Network request failed",
    type: "NetworkError",
    source: .network,
    attributes: [
        "url": "https://api.example.com",
        "status_code": 500
    ]
)
```

All error information will be displayed in the RUM Explorer of the FlashCat console, including error stack, attributes, and JSON details.

## Track Background Events

You can track events that occur when the application is running in the background (such as crashes and network requests).

Add the following code when configuring RUM:

```swift
RUM.enable(
    with: RUM.Configuration(
        applicationID: "<RUM_APPLICATION_ID>",
        trackBackgroundEvents: true
    )
)
```

## Track User Information

You can set user information for the current session:

```swift
import FlashcatCore

Flashcat.setUserInfo(
    id: "user-123",
    name: "John Doe",
    email: "john.doe@example.com",
    extraInfo: [
        "plan": "premium",
        "signup_date": "2024-01-15"
    ]
)
```

## Send Data When Device is Offline

The iOS SDK ensures data availability when the user's device is offline. In cases of weak network signals or low device battery, all events are first stored in batches on the local device.

Batches are sent as soon as the network becomes available and the battery is sufficient, ensuring the FlashCat SDK doesn't affect the end-user experience. If the network is unavailable while the app is running in the foreground, or if data upload fails, the batch is retained until it is successfully sent.

This means that even if users open your app while offline, no data is lost. To ensure the SDK doesn't use too much disk space, old data on disk is automatically discarded.

## WebView Integration

If your iOS application includes WKWebView, you can enable WebView tracking in the following way:

### Add WebView Dependencies

#### Swift Package Manager

When adding package dependencies, also add the `FlashcatWebView` module.

### Enable WebView Tracking

Enable WebView tracking in your ViewController:

```swift
import FlashcatWebView
import WebKit

let webView = WKWebView()

// Enable tracking for the specified WKWebView
WebViewTracking.enable(webView: webView, hosts: ["example.com", "*.example.com"])
```

**Parameter Description:**

- `webView`: The WKWebView instance to track
- `hosts`: List of allowed domains for tracking, supports wildcards

This way, web pages in your WebView can be associated with native app RUM data.

## Disable Automatic User Data Collection

To comply with privacy regulations or organizational data governance policies, you may need to disable automatic user data collection.

To disable automatic collection of client IP or geographic location data:

1. After creating the application, navigate to the **Application Management** page and click on your application
2. Click **User Data Collection**
3. Use the switches to control these settings

## Verify Integration

After integration is complete, you can verify successful integration through the following steps:

1. **Check Console Logs**: Search for the `FlashCat` keyword in the Xcode console to view SDK initialization and data reporting logs
2. **Access Console**: Log in to the FlashCat console and navigate to the corresponding RUM application to check if data is being reported
3. **Trigger Test Events**:
   - Open different pages of the app to verify page view events
   - Perform user operations (clicks, swipes, etc.) to verify interaction events
   - Trigger network requests to verify resource loading events
   - Manually trigger an error to verify error tracking

## Supported Versions

FlashCat iOS SDK supports the following platforms and versions:

- **iOS**: 12.0 and above
- **iPadOS**: 12.0 and above
- **tvOS**: 12.0 and above
- **macOS**: 10.14 and above (Mac Catalyst)

**Language Support**:

- Swift 5.0 and above
- Objective-C

## Further Reading

- [RUM Application Management](https://docs.flashcat.cloud/en/flashduty/rum/application-management): Learn how to create and manage RUM applications
- [iOS SDK Advanced Configuration](https://docs.flashcat.cloud/en/flashduty/rum/ios-advanced-configuration): Learn how to configure SDK advanced features
- [RUM Analysis Dashboard](https://docs.flashcat.cloud/en/flashduty/rum/analysis-dashboard): View and analyze RUM data
- [Track iOS Errors](https://docs.flashcat.cloud/en/flashduty/rum/ios-error-tracking): Learn how to track and debug iOS errors
- [SwiftUI Application Monitoring](https://docs.flashcat.cloud/en/flashduty/rum/swiftui-monitoring): Learn how to monitor SwiftUI applications
