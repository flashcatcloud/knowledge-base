---
title: "iOS RUM Data Collection"
description: "This document details the FlashCat iOS RUM SDK data collection mechanism, including event types, attributes, metrics, and data storage information."
date: "2024-05-09T10:00:00+08:00"
url: "https://docs.flashcat.cloud/en/flashduty/rum/ios-data-collected"
---

## Overview

FlashCat iOS RUM SDK generates events with associated metrics and attributes. Each RUM event includes default attributes, such as the UIViewController class URL corresponding to the event (`view.url`) and user information like device type (`device.type`) and country (`geo.country`).

Additionally, different event types have specific additional metrics and attributes. For example, the `view.time_spent` metric is associated with view events, while the `resource.method` attribute is associated with resource events.

## Application Startup

During app startup, the iOS SDK records app startup time and creates a corresponding view. Startup time is measured as the interval from process launch to the first `applicationDidBecomeActive` notification.

| Attribute             | Type           | Description                                                    |
| --------------------- | -------------- | -------------------------------------------------------------- |
| `view.is_start_view`  | Boolean        | Indicates whether this view is the initial view created at app startup. |
| `action.type`         | String         | Type of app startup action, value is `application_start`.     |
| `action.loading_time` | Number (nanoseconds) | Time required for app startup.                          |

## View Monitoring and App Lifecycle

In iOS apps, views are automatically created when users visit different screens. A view starts recording when the user opens a screen and stops when the view is no longer visible (e.g., user opens another screen).

When a view stops, the SDK doesn't immediately end its lifecycle but keeps it in `inactive` state for a period to attach subsequent events. If a new view starts during this period, the previous view will fully end. If no new view starts, the previous view will resume to `active` state.

When the app enters background, the SDK retains the last active view and monitors any new background events. Background time is not counted in the active view's `time_spent` metric. However, if the user immediately returns to the app, the SDK resumes the original `time_spent` measurement.

## Default Attributes

FlashCat iOS RUM SDK automatically captures the following default attributes, which apply to all RUM event types.

### Common Core Attributes

| Attribute        | Type   | Description                                                            |
| ---------------- | ------ | ---------------------------------------------------------------------- |
| `date`           | Integer | Event timestamp (in milliseconds).                                     |
| `type`           | String | Event type (such as `session`, `view`, `resource`, `error`, `action`). |
| `service`        | String | Service name that generated this event.                                |
| `application.id` | String | Unique identifier for the application.                                  |

### Device

The following device-related attributes are automatically attached to all events collected by FlashCat:

| Attribute      | Type   | Description                                                      |
| -------------- | ------ | ---------------------------------------------------------------- |
| `device.type`  | String | Device type (such as `Mobile`, `Tablet`, `TV`, `Desktop`, `Other`). |
| `device.brand` | String | Device brand, `Apple` for iOS devices.                           |
| `device.model` | String | Device model (such as `iPhone`, `iPad`, `iPod Touch`, `Apple TV`). |
| `device.name`  | String | Name of the device.                                              |

### Operating System

The following OS-related attributes are automatically attached to all events collected by FlashCat:

| Attribute          | Type   | Description                                          |
| ------------------ | ------ | ---------------------------------------------------- |
| `os.name`          | String | Operating system name (such as `iOS`, `iPadOS`, `tvOS`). |
| `os.version`       | String | OS version number (such as `15.4.1`, `16.0`).        |
| `os.version_major` | String | OS major version number (such as `15`, `16`).        |

### Network Connectivity

The following network-related attributes are automatically attached to resource and error events:

| Attribute                            | Type         | Description                                                   |
| ------------------------------------ | ------------ | ------------------------------------------------------------- |
| `connectivity.status`                | String       | Device network connection status (such as `connected`, `not_connected`). |
| `connectivity.interfaces`            | String array | Available network interface types (such as `wifi`, `cellular`, `ethernet`). |
| `connectivity.cellular.technology`   | String       | Cellular network technology type (such as `3G`, `4G`, `LTE`, `5G`). |
| `connectivity.cellular.carrier_name` | String       | Cellular network carrier name.                                |

### Geolocation

The following attributes relate to the geographic location of the IP address:

| Attribute                 | Type   | Description                                                  |
| ------------------------- | ------ | ------------------------------------------------------------ |
| `geo.country`             | String | Country name.                                                |
| `geo.country_iso_code`    | String | Country ISO code (such as `US`, `CN`).                       |
| `geo.country_subdivision` | String | First-level administrative division of the country (such as US states, Chinese provinces). |
| `geo.continent_code`      | String | Continent ISO code (such as `EU`, `AS`).                     |
| `geo.continent`           | String | Continent name.                                              |
| `geo.city`                | String | City name.                                                   |

### Global User Attributes

You can enable user tracking on all RUM events to correlate user sessions and simplify troubleshooting. User attributes are optional, but it's recommended to provide the following:

| Attribute   | Type   | Description                                                       |
| ----------- | ------ | ----------------------------------------------------------------- |
| `usr.id`    | String | Unique user identifier.                                           |
| `usr.name`  | String | User-friendly name, displayed by default in RUM UI.              |
| `usr.email` | String | User email address. Email is displayed if no username is provided. |

To set user information, see [Tracking User Information](./1.%20SDK%20Integration.md#tracking-user-information).

## Event-Specific Attributes

Different event types have specific attributes and metrics.

### Session Attributes

| Attribute                   | Type    | Description                             |
| --------------------------- | ------- | --------------------------------------- |
| `session.id`                | String  | Unique session identifier.              |
| `session.type`              | String  | Session type (such as `user`, `synthetic`). |
| `session.is_active`         | Boolean | Whether the session is active.          |
| `session.initial_view.id`   | String  | ID of the initial view in the session.  |
| `session.initial_view.url`  | String  | URL of the initial view in the session. |
| `session.initial_view.name` | String  | Name of the initial view in the session. |
| `session.last_view.id`      | String  | ID of the last view in the session.     |
| `session.last_view.url`     | String  | URL of the last view in the session.    |
| `session.last_view.name`    | String  | Name of the last view in the session.   |
| `session.has_crash`         | Boolean | Whether the session contains crash events. |
| `session.has_replay`        | Boolean | Whether session replay is enabled for the session. |

### View Attributes

| Attribute                   | Type               | Description                                       |
| --------------------------- | ------------------ | ------------------------------------------------- |
| `view.id`                   | String             | Unique view identifier.                           |
| `view.url`                  | String             | View URL, corresponding to UIViewController class name. |
| `view.name`                 | String             | Customizable view name.                           |
| `view.referrer`             | String             | URL of the previous view.                         |
| `view.action.count`         | Number             | Number of user actions collected in this view.    |
| `view.error.count`          | Number             | Number of errors collected in this view.          |
| `view.resource.count`       | Number             | Number of resources collected in this view.       |
| `view.time_spent`           | Number (nanoseconds) | Time user spent on this view.                   |
| `view.network_settled_time` | Number (nanoseconds) | Time required for full initialization when view starts. |
| `view.is_active`            | Boolean            | Whether the view is active.                       |
| `view.is_slow_rendered`     | Boolean            | Whether view rendering is slow.                   |
| `view.crash.count`          | Number             | Number of crashes that occurred in this view.     |
| `view.frozen_frame.count`   | Number             | Number of frozen frames in this view.             |
| `view.refresh_rate_average` | Number             | Average refresh rate of the view.                 |
| `view.refresh_rate_min`     | Number             | Minimum refresh rate of the view.                 |
| `view.memory_average`       | Number             | Average memory usage of the view.                 |
| `view.memory_max`           | Number             | Maximum memory usage of the view.                 |
| `view.cpu_ticks_count`      | Number             | CPU clock cycles of the view.                     |
| `view.cpu_ticks_per_second` | Number             | CPU clock cycles per second of the view.          |

### Resource Attributes

| Attribute                      | Type               | Description                                                    |
| ------------------------------ | ------------------ | -------------------------------------------------------------- |
| `resource.id`                  | String             | Unique resource identifier.                                    |
| `resource.url`                 | String             | Resource URL.                                                  |
| `resource.method`              | String             | HTTP method (such as `GET`, `POST`, `PATCH`, `DELETE`).        |
| `resource.type`                | String             | Resource type (such as `xhr`, `image`, `font`, `css`, `js`).   |
| `resource.status_code`         | Number             | HTTP response status code.                                     |
| `resource.size`                | Number (bytes)     | Resource size.                                                 |
| `resource.duration`            | Number (nanoseconds) | Total time required to load the resource.                    |
| `resource.connect.duration`    | Number (nanoseconds) | Time required to establish server connection (connectEnd - connectStart). |
| `resource.ssl.duration`        | Number (nanoseconds) | Time required for TLS handshake.                             |
| `resource.dns.duration`        | Number (nanoseconds) | Time required for DNS resolution (domainLookupEnd - domainLookupStart). |
| `resource.first_byte.duration` | Number (nanoseconds) | Time waiting to receive first response byte (responseStart - requestStart). |
| `resource.download.duration`   | Number (nanoseconds) | Time downloading response (responseEnd - responseStart).     |
| `resource.redirect.duration`   | Number (nanoseconds) | Time required for subsequent HTTP requests (redirectEnd - redirectStart). |
| `resource.provider.name`       | String             | Resource provider name, defaults to `unknown`.                 |
| `resource.provider.domain`     | String             | Resource provider domain.                                      |
| `resource.provider.type`       | String             | Resource provider type (such as `first-party`, `cdn`, `ad`, `analytics`). |

### Error Attributes

Frontend errors are collected through RUM. Error messages and stack traces (if available) are included.

| Attribute         | Type               | Description                                                                                                               |
| ----------------- | ------------------ | ------------------------------------------------------------------------------------------------------------------------- |
| `error.source`    | String             | Error source (such as `webview`, `logger`, `network`).                                                                    |
| `error.type`      | String             | Error type (error code in some cases).                                                                                    |
| `error.message`   | String             | Concise, readable single-line error message.                                                                              |
| `error.stack`     | String             | Error stack trace or supplemental information.                                                                            |
| `error.issue_id`  | String             | Unique identifier for the error issue.                                                                                    |
| `error.category`  | String             | High-level grouping of error types. Possible values include: `ANR`, `App Hang`, `Exception`, `Watchdog Termination`, `Memory Warning`, `Network`. |
| `error.file`      | String             | File where error tracking found the issue.                                                                                |
| `error.is_crash`  | Boolean            | Whether this error caused an app crash.                                                                                   |
| `freeze.duration` | Number (nanoseconds) | Duration of main thread freeze. Only applicable to App Hang.                                                           |

### Network Errors

Network errors contain information about failed HTTP requests. The following additional attributes are collected:

| Attribute                        | Type   | Description                                                      |
| -------------------------------- | ------ | ---------------------------------------------------------------- |
| `error.resource.status_code`     | Number | HTTP response status code.                                       |
| `error.resource.method`          | String | HTTP method (such as `GET`, `POST`).                             |
| `error.resource.url`             | String | Resource URL.                                                    |
| `error.resource.provider.name`   | String | Resource provider name, defaults to `unknown`.                   |
| `error.resource.provider.domain` | String | Resource provider domain.                                        |
| `error.resource.provider.type`   | String | Resource provider type (such as `first-party`, `cdn`, `ad`, `analytics`). |

### Action Attributes

| Attribute                | Type               | Description                                            |
| ------------------------ | ------------------ | ------------------------------------------------------ |
| `action.id`              | String             | Unique user action identifier.                         |
| `action.type`            | String             | User action type (such as `tap`, `application_start`). |
| `action.name`            | String             | User action name.                                      |
| `action.target.name`     | String             | Element user interacted with. Only for automatically collected actions. |
| `action.loading_time`    | Number (nanoseconds) | Action loading time.                                 |
| `action.resource.count`  | Number             | Number of resources triggered by this action.          |
| `action.error.count`     | Number             | Number of errors triggered by this action.             |
| `action.long_task.count` | Number             | Number of long tasks triggered by this action.         |

### Crash Attributes

When an app crashes, the following additional attributes are collected:

| Attribute             | Type   | Description                                          |
| --------------------- | ------ | ---------------------------------------------------- |
| `error.signal`        | String | Signal name that caused the crash (such as `SIGABRT`, `SIGSEGV`). |
| `error.binary_images` | Array  | List of binary images loaded at crash time.          |
| `error.threads`       | Array  | State of all threads at crash time.                  |
| `error.meta`          | Object | Crash-related metadata.                              |

## Data Storage

Before uploading to FlashCat, data is stored in plain text in the app sandbox's cache directory (`Library/Caches`). Other apps installed on the device cannot read this directory.

To ensure the SDK doesn't occupy excessive disk space, outdated data is automatically discarded. The SDK follows these rules:

- When network is available and device battery is sufficient, data is sent in batches.
- If network is unavailable or data upload fails, batches are retained until successfully sent.
- Data exceeding a certain time limit is automatically cleaned up.

This means data won't be lost even if users use your app while offline.

## More Information

- [iOS SDK Integration](./1.%20SDK%20Integration.md): Learn how to integrate FlashCat RUM SDK in iOS apps
- [iOS SDK Advanced Configuration](./2.%20Advanced%20Configuration.md): Learn how to configure advanced SDK features
- [RUM Data Collection](../../8.%20Others/2.%20Data%20Collection.md): Learn about RUM general data collection mechanism
