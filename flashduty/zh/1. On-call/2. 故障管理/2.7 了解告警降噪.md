---
title: "了解告警降噪"
description: "理解事件、告警、故障的关系，以及 Flashduty 如何通过聚合减少告警噪音"
date: "2025-05-19T10:00:00+08:00"
url: "https://docs.flashcat.cloud/zh/flashduty/what-is-noise-reduction"
---

告警降噪是 Flashduty 的核心能力之一。当告警风暴来袭时，您可能会收到数百条相似通知。降噪功能将这些告警聚合为一条故障，让您只需处理一次，而非被重复通知淹没。

## 为什么需要降噪
---

| 场景 | 无降噪 | 有降噪 |
| :--- | :--- | :--- |
| 服务器宕机触发 100 条告警 | 收到 100 条通知，需逐条处理 | 收到 1 条故障，统一处理 |
| 网络抖动导致告警反复触发/恢复 | 通知轰炸，疲于应对 | 标记抖动状态，减少干扰 |
| 凌晨批量告警 | 被电话/短信吵醒多次 | 仅通知一次，睡眠不受影响 |

**降噪的核心价值**：
- 减少通知频次，避免告警疲劳
- 聚焦真正需要关注的问题
- 提升故障响应和处理效率

## 核心概念
---

理解降噪前，需要先了解三个核心对象的关系：

```
监控系统 → 事件（Event）→ 告警（Alert）→ 故障（Incident）
```

| 对象 | 定义 | 来源 |
| :--- | :--- | :--- |
| **事件** | 监控系统的原始通知，每次触发或恢复都是一次事件 | Zabbix、Prometheus 等 |
| **告警** | 由事件自动触发，同一告警的多次事件会合入同一条告警 | Flashduty 自动创建 |
| **故障** | Flashduty 处理的主要对象，由告警触发或手动创建 | 自动触发或手动创建 |

**关键理解**：
- 一条告警可以包含多个事件（同一告警的触发、恢复）
- 一条故障可以包含多条告警（相似告警被聚合到一起）
- 降噪发生在「告警 → 故障」这个环节

## 降噪过程
---

当监控系统推送告警到 Flashduty 时，系统会自动执行以下流程：

```
1. 接收事件 → 判断是否合入已有告警（否则创建新告警）
       ↓
2. 新告警 → 判断是否合入已有故障（否则创建新故障）
       ↓
3. 新故障 → 按分派策略通知相关人员
       ↓
4. 后续告警 → 合入已有故障，不再重复通知
```
![2025-12-18-15-18-29](https://docs-cdn.flashcat.cloud/images/png/6fec1c4fa6318119ab5c7f69f0c3cd55.png)

## 聚合方式
---

Flashduty 支持两种聚合方式：

- **智能聚合**：基于机器学习分析语义相似度，无需手动配置规则
- **规则聚合**：按指定维度（如主机、检查项）精确匹配

详细配置方法请参考 [配置告警降噪](https://docs.flashcat.cloud/zh/flashduty/noise-reduction-settings)。

## 聚合效果示例
---

假设配置按「告警检查项」聚合，系统依次收到 5 条告警通知：

| 事件 | 主机 | 指标值 | 级别 |
| :--- | :--- | :--- | :--- |
| 事件 1 | es.nj.03 | cpu.idle = 10% | Critical |
| 事件 2 | es.nj.03 | cpu.idle = 18% | Warning |
| 事件 3 | es.nj.01 | cpu.idle = 15% | Warning |
| 事件 4 | es.nj.03 | cpu.idle = 10% | Ok（恢复） |
| 事件 5 | es.nj.02 | cpu.idle = 19% | Warning |

**聚合结果**：5 条通知 → 1 条故障

```
故障：cpu idle < 20% / es.nj.03，Critical

  └─ 告警 cpu idle < 20% / es.nj.03（3 个事件）
  └─ 告警 cpu idle < 20% / es.nj.01（1 个事件）
  └─ 告警 cpu idle < 20% / es.nj.02（1 个事件）
```

在故障详情页可以查看完整的聚合关系：

![2025-12-24-17-25-13](https://docs-cdn.flashcat.cloud/images/png/d30fe90cf8c1a81c04e65f75fb819afe.png)

## 常见问题
---

<details>
<summary>故障标题会随新告警合入而改变吗？</summary>

不会。故障标题与触发该故障的第一条告警相同，可随时手动修改。

</details>

<details>
<summary>故障标签会随新告警合入而改变吗？</summary>

- **手工创建的故障**：不会，标签列表永远为空。
- **自动触发的故障**：有可能，故障标签与第一条告警保持一致，如果该告警标签变化，故障标签也会同步更新。

</details>

<details>
<summary>单个故障最多聚合多少条告警？</summary>

上限为 5000 条。由于后台并发处理，实际可能略超此限制。

</details>

<details>
<summary>为什么推送的事件数量和告警关联的事件数量对不上？</summary>

事件到告警的合并也是降噪过程。如果新事件与告警变化不大（状态、严重程度、描述都相同），Flashduty 会丢弃新事件，仅用其标签覆盖已有标签。

</details>

## 下一步
---

- [配置告警降噪](https://docs.flashcat.cloud/zh/flashduty/noise-reduction-settings) - 设置聚合窗口、聚合模式等参数
- [配置静默与抑制](https://docs.flashcat.cloud/zh/flashduty/channel-settings) - 进一步减少告警噪音
