---
title: "配置告警降噪"
description: "将多条相似告警聚合为一条故障，减少通知频次，提升处理效率"
date: "2025-12-16T10:00:00+08:00"
url: "https://docs.flashcat.cloud/zh/flashduty/noise-reduction-settings"
---

告警聚合将多条相似告警合并为一条故障，统一分派和通知。当告警风暴来袭时，您只需处理一条故障，而非数百条重复通知。

# 视频介绍
---

<Video width="200" style="width: 140px;" src="https://download.flashcat.cloud/flashduty/video/alert-aggr.mp4"></Video>

## 配置告警聚合
---

进入 协作空间详情 → **告警降噪**，开启并配置聚合策略。

:::tip
新建协作空间默认关闭告警聚合。未开启时，每条告警将创建一条独立故障。
:::

### 聚合模式

Flashduty 提供两种聚合模式：

| 模式 | 适用场景 | 特点 |
| :--- | :--- | :--- |
| **智能聚合** | 快速上手，对聚合精度要求不高 | 基于机器学习分析语义相似度，无需手动配置规则 |
| **规则聚合** | 需要精确控制聚合逻辑 | 按指定维度（属性、标签）精确匹配 |


### 通用配置

| 配置项 | 说明 |
| :--- | :--- |
| **聚合窗口** | 仅聚合时间窗口内的告警，超出窗口的告警将触发新故障 |
| **风暴预警** | 当合入告警数达到阈值时触发预警通知，提醒加急处理 |
| **严格聚合** | 开启时，空值标签视为不同项；关闭时，空值标签视为相同项（智能聚合不支持） |

#### 智能聚合

当新告警与活跃故障的内容高度相似时，自动合入故障。

1. 选择 **智能聚合** 模式。
2. 指定参与计算的字段（最多 10 个）。

![2025-12-09-17-11-44](https://docs-cdn.flashcat.cloud/images/png/eab535b1239723a6adc41841013d7b37.png)

#### 规则聚合

按指定维度精确匹配，仅当所有维度值完全相同时才聚合。

**统一控制**：空间内所有告警使用相同维度聚合。

![2025-12-16-15-57-36](https://docs-cdn.flashcat.cloud/images/png/050d08ecb83427d7c56631f3dc19b553.png)

**细粒度控制**：按条件匹配不同聚合维度，未匹配则使用默认维度或不聚合。

![2025-12-09-17-12-18](https://docs-cdn.flashcat.cloud/images/png/f8e69fbecb54fe52a71dc526134fc7d6.png)

## 查看聚合效果
---

设置按 **告警检查项** 聚合后，5 条告警通知被聚合为 1 条故障：

```
故障：cpu idle < 20% / es.nj.03，Critical

  - 告警 cpu idle < 20% / es.nj.03：
      - 事件1：es.nj.03，cpu.idle = 10%，Critical
      - 事件2：es.nj.03，cpu.idle = 18%，Warning
      - 事件4：es.nj.03，cpu.idle = 10%，Ok

  - 告警 cpu idle < 20% / es.nj.01：
      - 事件3：es.nj.01，cpu.idle = 15%，Warning
  
  - 告警 cpu idle < 20% / es.nj.02：
      - 事件5：es.nj.02，cpu.idle = 19%，Warning
```

在故障详情页查看聚合关系：
- 点击告警标题，查看告警时间线和关联事件
- 点击事件点，查看事件上报的具体内容

![2025-12-16-16-04-21](https://docs-cdn.flashcat.cloud/images/png/f91f5583c3176f40afd5e47711405c9a.png)

## 配置抖动检测
---

当同一故障频繁触发与恢复时，系统将其标记为"抖动"状态，避免通知轰炸。

进入 协作空间详情 → 告警降噪 → **抖动检测**：

| 选项 | 行为 |
| :--- | :--- |
| **关闭** | 不检测抖动状态（默认） |
| **仅提醒** | 标记抖动状态，继续按策略通知 |
| **提醒后静默** | 标记抖动状态，首次提醒后不再通知 |

:::tip
"相同故障"指具有相同 Alert Key 的故障，通常使用上游系统推送的告警 ID 作为唯一标识。
:::

## 常见问题
---

<details>
<summary>故障标题会随新告警合入而改变吗？</summary>

不会。故障标题与触发该故障的第一条告警相同，可随时手动修改，不会随新告警变化。

</details>

<details>
<summary>故障标签会随新告警合入而改变吗？</summary>

- **手工创建的故障**：不会，标签列表永远为空。
- **自动触发的故障**：有可能，故障标签与第一条告警保持一致，如果该告警标签变化，故障标签也会同步更新。

</details>

<details>
<summary>告警标签会随新事件合入而改变吗？</summary>

会。告警标签总是与最新合入的事件保持一致。但如果新事件是恢复事件，告警将保持已有标签不变，仅增加之前不存在的标签。

</details>

<details>
<summary>单个故障最多聚合多少条告警？</summary>

上限为 5000 条，主要为了保证控制台渲染性能。由于后台并发处理，实际可能略超此限制。

</details>

<details>
<summary>单个告警最多关联多少条事件？</summary>

- **规则聚合**：无上限，聚合窗口最大为 24 小时。告警触发 24 小时后不再合入新事件，新事件将产生新故障。
- **智能聚合**：无上限，聚合窗口最大为 30 天。告警触发 30 天后不再合入新事件，新事件将产生新故障。
</details>

## 下一步
---

- [配置分派策略](https://docs.flashcat.cloud/zh/flashduty/escalate-rule-settings) - 定义告警通知和升级规则
- [配置静默与抑制](https://docs.flashcat.cloud/zh/flashduty/channel-settings) - 在维护窗口或依赖关系中屏蔽通知
