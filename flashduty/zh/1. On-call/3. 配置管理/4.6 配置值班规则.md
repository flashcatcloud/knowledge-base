---
title: "值班规则"
description: "灵活配置值班表与轮换规则，确保 7x24 小时故障响应"
date: "2025-12-16T10:00:00+08:00"
url: "https://docs.flashcat.cloud/zh/flashduty/schedule-settings"
---

在应急响应（On-Call）体系中，**值班表**（Schedule）是连接“故障”与“人”的桥梁。一个合理的值班机制，既能确保故障发生时“一定有人响应”，又能避免让某一个人长期处于高压状态，实现团队的可持续运维。

Flashduty 提供极具灵活性的值班编排能力，支持按天、周、自定义周期轮换，同时也支持白班/夜班、主备值班等复杂场景。

## 视频介绍
---
<Video width="200" style="width: 140px;" src="https://download.flashcat.cloud/flashduty/video/schedule.mp4"></Video>

## 核心概念
---
在配置之前，理解以下概念有助于您更好地规划值班：

*   **值班表**：一个独立的值班单元（如“SRE值班表”、“DBA值班表”）。它包含多条具体的值班规则。
*   **值班层**：一个值班表可以包含多层规则。例如，第一层是“白班”，第二层是“夜班”。多层规则叠加，最终形成完整的值班计划。
*   **轮换**：决定了值班人员如何交接。例如“每周一上午10点交接”。
*   **临时调班**：在不修改长期规则的前提下，临时调整某一段时间的值班人（常用于请假、临时顶班）。
*   **日期掩码**：选择参与值班的时期，比如周一到周五时 A 团队值班，周末是 B 团队值班。

![2025-09-22-13-43-17](https://docs-cdn.flashcat.cloud/images/png/3423a4f3133d5caa1f0aaebca970d404.png)

## 配置流程
---

### 1. 创建值班表
进入 **值班管理**，点击“创建值班表”。
*   **值班描述**：支持 Markdown 语法，该区域的内容可以在通知时携带。
*   **所属团队**：指定该值班表归属哪个团队管理，并非值班人员。

### 2. 设置通知提醒
为了避免忘记值班或交接，系统提供两种提醒：
*   **交接班通知**：在轮换交接前 N 分钟（如提前15分钟），同时通知“即将下班”和“即将接班”的人员。
*   **值班中通知**：在值班期间，每天固定时间（如上午9:00）发送通知，提醒当前谁在值班。
*   **渠道**：支持邮件、短信、电话、IM（飞书/钉钉/企微）。

### 3. 定义值班规则
这是最核心的步骤。您可以添加一层或多层规则。每层规则包含：
*   **值班人员**：选择参与轮换的成员。
*   **轮换周期**：支持天、周、自定义时长。
*   **限制时间段**：(可选) 该规则仅在特定时间段生效。例如，配置“仅周末值班”规则时，可限制生效时间为 `周六 00:00` 至 `周日 23:59`。


## 临时调班与请假
---
当值班人员需要请假或临时有事时，**不要修改永久的值班规则**，请使用“临时调班”功能。

1.  在值班日历视图中，找到需要调整的时间段。
2.  点击该时间段，选择 **“临时调班”** (Override)。
3.  选择 **替班人员** 和 **具体时间范围**。

**特点**：
*   **临时生效**：只影响选定的时间段，调班结束后自动恢复原规则。
*   **记录留痕**：所有的调班记录都会被保存，方便后续审计。

:::tip 最佳实践
建议在正式交接班前，新旧值班人员进行一次简短的同步会，确认遗留问题和当前系统状态，这比单纯的系统通知更安全。
:::

## 常见排班场景
---

### 场景一：7x24小时 简单轮换
**需求**：运维组有 A、B、C 三位同学，每人值班一周，周一上午 10:00 交接。
*   **配置**：
    *   人员序列：A, B, C
    *   轮换周期：1周
    *   交接时间：周一 10:00
*   **效果**：A值班一周 -> B值班一周 -> C值班一周 -> A值班一周...

![2025-12-08-16-53-51](https://docs-cdn.flashcat.cloud/images/png/1a730fa3bf86e2bf206f1e4c9869371c.png)

### 场景二：白班/夜班 分离
**需求**：
*   **白班**（9:00-18:00）：由研发团队轮流值班。
*   **夜班**（18:00-次日9:00）：由 SRE 团队轮流值班。
*   **周末**：全天由监控小组值班。

**配置思路**：创建多个规则。
1.  **规则 1（研发白班）**：添加研发人员，限制生效时间为 `工作日 09:00 ~ 18:00`。
2.  **规则 2（SRE夜班）**：添加 SRE 人员，限制生效时间为 `工作日 18:00 ~ 09:00`。
3.  **规则 3（监控小组）**：添加 SRE 人员，限制生效时间为 `周六 00:00 ~ 周日 23:59`。

![2025-12-08-17-09-34](https://docs-cdn.flashcat.cloud/images/png/b9d927672873bd1baf46f5146fde34e9.png)

![2025-12-08-17-04-47](https://docs-cdn.flashcat.cloud/images/png/d9045ae9474bc300d38bf0d24bb69abc.png)

### 场景三：主备值班
**需求**：重要业务需要双重保障，设有一名主值班和一名备值班。
**配置思路**：
*   **同一规则内**：在添加值班人员时，支持同时设置主备人员。
*   **通知**：在分派策略的通知对象中，可以选择将告警通知给值班表的主值班或备值班。
*   **优势**：无需创建多层规则，管理更简单。

![2025-12-08-17-47-40](https://docs-cdn.flashcat.cloud/images/png/3eef3b3290befffa076316d1bae8b521.png)
![2025-12-08-17-48-02](https://docs-cdn.flashcat.cloud/images/png/261cb975427527cc305c3ad467dd935e.png)