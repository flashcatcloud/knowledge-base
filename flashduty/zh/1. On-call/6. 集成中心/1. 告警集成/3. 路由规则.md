---
title: "配置路由规则"
description: "将共享集成的告警按条件分发到不同协作空间"
date: "2025-12-16T10:00:00+08:00"
url: "https://docs.flashcat.cloud/zh/flashduty/alert-routings"
---

路由规则用于共享集成，根据告警属性将事件分发到对应的协作空间，实现告警的分类处理。

视频介绍
---

<Video width="200" style="width: 140px;" src="https://download.flashcat.cloud/flashduty/video/routings.mp4"></Video>

## 配置路由规则
---

进入 集成中心 → 告警事件 → 集成详情 → **路由** → **添加路由**。

### 配置说明

| 配置项 | 说明 |
| :--- | :--- |
| **匹配条件** | 按标签、属性等条件筛选告警，支持精确、通配符、正则匹配 |
| **路由模式** | 见下方详细说明 |
| **流程控制** | **继续匹配**（默认）：命中后继续匹配后续规则；**停止匹配**：命中后不再匹配 |
| **默认路由** | 兜底规则，当所有规则都不匹配时生效 |

**路由模式**：

| 模式 | 说明 | 适用场景 |
| :--- | :--- | :--- |
| **标准路由** | 手动选择目标协作空间 | 告警与空间对应关系固定 |
| **名称映射** | 将指定标签的值映射为协作空间名称，自动投递 | 告警已携带业务标识且空间名与标签值一致，**如对应空间不存在则投递至默认路由或丢弃**|

![2025-12-18-13-34-27](https://docs-cdn.flashcat.cloud/images/png/e3a143b9a64a8a11045402530119f5eb.png)

### 操作技巧

- **调整顺序**：使用上下箭头或拖动规则以及按协作空间调整匹配优先级。
- **插入规则**：在指定规则前后快速插入新规则。
- **筛选规则**：可以按协作空间筛选出投递到该空间的所有规则。
- **编辑历史**：查看历史配置并快速恢复到某个版本。

## 配置示例
---

### 示例一：按业务组路由

**场景**：将监控平台中相同业务组的告警投递到对应协作空间。

| 配置项 | 值 |
| :--- | :--- |
| **匹配条件** | `Labels.group_name` 等于 `Flashduty` |
| **路由模式** | 标准路由 |
| **投递空间** | Flashduty |

![2025-12-18-14-24-14](https://docs-cdn.flashcat.cloud/images/png/f2db7a22f7c1998cd541c2d00fa3a3e8.png)

### 示例二：按告警级别路由

**场景**：将 Critical 级别告警投递到核心业务空间，其他级别投递到常规空间。

| 规则顺序 | 匹配条件 | 投递空间 | 流程控制 |
| :--- | :--- | :--- | :--- |
| 1 | `severity` 等于 `Critical` | SRE 空间 | 停止匹配 |
| 2 | 默认路由 | 常规告警空间 | - |

![2025-12-18-14-22-05](https://docs-cdn.flashcat.cloud/images/png/554c85b58082d15744f6b878f0473b8e.png)

### 示例三：名称映射模式

**场景**：告警标签中已包含业务线标识（如 `Labels.team=payment`），且协作空间名称与标签值一致。

| 配置项 | 值 |
| :--- | :--- |
| **匹配条件** | 全部告警 |
| **路由模式** | 名称映射 |
| **映射标签** | `Labels.team` |

**效果**：`Labels.team=payment` 的告警自动投递到名为 `payment` 的协作空间。

![2025-12-18-14-20-56](https://docs-cdn.flashcat.cloud/images/png/6e42dbbbf0ebfc9d3adb9061718b28e0.png)

:::tip
使用名称映射模式前，请确保协作空间名称与标签值完全一致，否则告警将投递到默认路由。
:::

## 常见问题
---

<details>
<summary>路由规则没有生效？</summary>

检查告警事件的属性/标签是否与规则匹配，以及规则配置是否正确。

</details>

<details>
<summary>多条规则匹配到相同告警，投递到相同空间会怎样？</summary>

每个协作空间都会生成对应的故障。建议在同一规则中选择多个空间，避免重复。

</details>

<details>
<summary>配置路由规则后收不到告警了？</summary>

确认上报的告警能命中配置的路由规则。建议配置默认兜底路由接收无法匹配的告警。

</details>

<details>
<summary>流程控制选择"停止"时，是否还会匹配默认路由？</summary>

会。默认路由是兜底规则，不受流程控制限制。

</details>

## 下一步
---

- [接入告警](https://docs.flashcat.cloud/zh/flashduty/how-to-integrate-alerts) - 了解专属集成与共享集成的区别
- [配置过滤条件](https://docs.flashcat.cloud/zh/flashduty/how-to-filter) - 了解条件匹配语法
