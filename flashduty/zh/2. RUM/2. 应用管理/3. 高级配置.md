---
title: "RUM SDK 高级配置"
description: "通过RUM SDK 高级配置提供的API，修改RUM收集的数据和上下文"
date: "2024-05-09T10:00:00+08:00"
url: "https://docs.flashcat.cloud/zh/flashduty/rum/advanced-configuration"
---


# 高级配置

您可以通过多种方式修改RUM收集的数据和上下文，以支持您的需求：

- 保护个人识别信息等敏感数据。
- 将用户会话与该用户的内部标识连接起来，以帮助提供支持。
- 通过对数据进行采样，减少您正在收集的RUM数据量。
- 提供比默认属性提供的关于数据来源的上下文更多的上下文。

## 添加全局上下文属性

使用 `addRumGlobalContext` API 添加适用于所有未来 RUM 事件的上下文：

```javascript
import { flashcatRum } from '@flashcat/browser-rum';

// 添加全局上下文
flashcatRum.addRumGlobalContext('example_key', 'example_value');

// 添加嵌套全局上下文
flashcatRum.addRumGlobalContext('product', {
    name: 'shirt',
    price: 25,
    color: 'blue',
});
```

## 替换全局上下文

使用 `setRumGlobalContext` API 将整个全局上下文替换为新的上下文：

```javascript
import { flashcatRum } from '@flashcat/browser-rum';

flashcatRum.setRumGlobalContext({
    example_key: 'example_value',
    product: {
        name: 'shirt',
        price: 25,
        color: 'blue',
    },
});
```

## 删除上下文属性

使用 `removeRumGlobalContext` API 删除特定的上下文属性：

```javascript
import { flashcatRum } from '@flashcat/browser-rum';

flashcatRum.removeRumGlobalContext('example_key');
```

## 添加用户信息

使用 `setUser` API 向所有未来的 RUM 事件添加用户信息：

```javascript
import { flashcatRum } from '@flashcat/browser-rum';

flashcatRum.setUser({
    id: '1234',
    name: 'John Doe',
    email: 'john@example.com',
    plan: 'premium',
});
```


配置分布式跟踪允许的源：

```javascript
import { flashcatRum } from '@flashcat/browser-rum';

flashcatRum.init({
    applicationId: '<FLASHCAT_APPLICATION_ID>',
    clientToken: '<FLASHCAT_CLIENT_TOKEN>',
    site: '<FLASHCAT_SITE>',
    service: '<SERVICE_NAME>',
    allowedTracingOrigins: [
        'https://api.example.com',
        /example\.org$/,
    ],
});
``` 