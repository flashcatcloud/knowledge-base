---
title: "RUM 数据查询语法指南"
description: "掌握 Flashduty RUM 查看器的搜索语法，通过灵活的查询条件快速定位和分析用户数据。"
date: "2024-05-09T10:00:00+08:00"
url: "https://docs.flashcat.cloud/zh/flashduty/rum/session-explorer-data-query"
---

## 概述

Flashduty RUM 查看器提供了强大的搜索功能，允许您通过灵活的查询语法快速定位和分析 RUM 数据。查询由**词项**和**操作符**组成，支持复杂的搜索条件组合，帮助您从海量数据中精准找到所需信息。

## 查询基础

### 词项类型

查询支持两种类型的词项：

1. **单词项**：单个词汇，如 `test` 或 `hello`
2. **短语**：用双引号包围的词汇组，如 `"hello dolly"`

### 布尔操作符

您可以使用以下布尔操作符组合多个词项构建复杂查询：

| 操作符 | 描述                                             | 示例                |
| ------ | ------------------------------------------------ | ------------------- |
| `AND`  | 交集：两个词项都必须在选定的视图中（默认操作符） | `error AND timeout` |
| `OR`   | 并集：任一词项包含在选定的视图中                 | `error OR warning`  |
| `-`    | 排除：后面的词项不在视图中                       | `error -timeout`    |

## 搜索功能

### 自动补全

使用搜索栏的自动补全功能，可以快速完成查询并选择现有值。当您开始输入时，系统会显示匹配的建议选项，提高搜索效率。

### 特殊字符转义

搜索包含特殊字符的字段值时，需要使用转义或双引号。以下字符被视为特殊字符：`?`, `>`, `<`, `:`, `=`, `"`, `~`, `/`, `\`，需要用反斜杠 `\` 进行转义。

对于视图字段名中的空格，也需要进行转义。例如，如果字段名为 `user.first name`，搜索时应转义空格：

```
@user.first\ name:myvalue
```

### 通配符搜索

使用 `*` 符号进行多字符通配符搜索。例如：

```
@http.url:https:\/\/*
```

匹配所有以 `https://` 开头的 URL 视图。

### 数值搜索

使用比较操作符进行数值属性搜索：

- `<`：小于
- `>`：大于
- `<=`：小于等于
- `>=`：大于等于

**示例**：检索错误数超过 5 的所有会话：

```
@session.error.count:>5
```

### 范围搜索

使用方括号语法搜索数值属性的特定范围：

```
@session.error.count:[3 TO 10]
```

检索错误数在 3 到 10 之间的所有会话。

## 搜索示例

### 基础路径搜索

```
@view.url_path:"/department/sofas"
```

搜索所有在 `@view.path` 属性中包含 `/department/sofas` 的视图。

### 通配符路径搜索

```
@view.url_path:\/department\/sofas\/*
```

搜索所有在 `view.path` 属性中以 `/department/sofas/` 开头的视图。

### 复合条件搜索

```
@view.loading_time:[1s TO 3s] @view.url_path:\/department\/sofas\/*
```

搜索加载时间在 1 到 3 秒之间，且 URL 路径以 `/department/sofas/` 开头的所有视图。

### 错误分析搜索

```
@error.message:"TypeError" @view.url_path:/checkout/*
```

搜索结账页面中发生的 TypeError 错误。

### 性能分析搜索

```
@view.loading_time:>5s @view.url_path:/product/*
```

搜索产品页面中加载时间超过 5 秒的视图。

## 高级搜索技巧

### 1. 时间范围搜索

结合时间范围进行精确搜索：

```
@view.loading_time:>2s @timestamp:[2024-01-01 TO 2024-01-31]
```

### 2. 用户行为搜索

```
@action.type:click @view.url_path:/checkout/*
```

搜索结账页面的用户点击行为。

### 3. 设备类型搜索

```
@device.type:mobile @view.loading_time:>3s
```

搜索移动设备上加载时间超过 3 秒的视图。

### 4. 地理位置搜索

```
@geo.country:CN @error.count:>0
```

搜索中国地区发生错误的会话。

## 最佳实践

1. **使用引号包围短语**：确保多词短语的精确匹配
2. **合理使用通配符**：避免过于宽泛的搜索条件
3. **组合多个条件**：通过 AND/OR 操作符构建精确查询
4. **保存常用搜索**：提高重复查询的效率
5. **利用自动补全**：减少输入错误，提高搜索准确性

## 下一步

- [RUM 查看器概览](https://docs.flashcat.cloud/zh/flashduty/rum/rum-explorer)
- [分布式追踪最佳实践](https://docs.flashcat.cloud/zh/flashduty/rum/distributed-tracing)
- [性能监控分析](https://docs.flashcat.cloud/zh/flashduty/rum/performance-monitoring)
