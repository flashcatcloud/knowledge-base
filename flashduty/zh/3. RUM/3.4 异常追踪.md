---
title: "RUM 错误跟踪"
description: "了解如何使用FlashCat实时用户监控(RUM)跟踪和分析Web应用程序中的错误。"
date: "2024-05-09T10:00:00+08:00"
url: "https://docs.flashcat.cloud/zh/flashduty/rum/error-tracking"
---

## 概述
---

错误跟踪是实时用户监控(RUM)的关键组成部分，帮助您识别和修复影响用户的问题。FlashCat RUM自动捕获JavaScript错误、网络故障和其他影响用户体验的问题，提供详细的上下文以便更快地调试。

## 跟踪的错误类型
---

FlashCat RUM跟踪几种类型的错误：

### JavaScript错误

JavaScript错误包括语法错误、运行时错误和未处理的Promise拒绝。这些错误可能会阻止您的应用程序正常运行，导致用户体验不佳。

### 网络错误

网络错误发生在对后端服务或第三方API的请求失败时。这些包括：

- 失败的XHR/Fetch请求
- 超时错误
- CORS错误
- 4xx和5xx HTTP状态码

### 资源加载错误

资源加载错误发生在浏览器无法加载图像、脚本、样式表或字体等资源时。这些错误可能导致内容缺失或功能损坏。

### 自定义错误

除了自动跟踪的错误外，您还可以使用RUM SDK手动跟踪自定义错误。这对于跟踪业务逻辑错误或其他特定于您应用程序的问题非常有用。

## 错误仪表板
---

FlashCat RUM错误仪表板提供应用程序中发生的错误的全面视图。要访问仪表板：

1. 登录FlashCat控制台
2. 导航至 **RUM** > **应用程序** > **您的应用程序**
3. 点击 **错误** 选项卡

仪表板包括：

- **错误概览**：一段时间内错误趋势的摘要
- **主要错误**：影响用户最频繁的错误
- **错误分布**：按类型、浏览器、设备和位置的错误细分
- **错误影响**：错误如何影响用户体验指标的分析

## 错误详情
---

当您在仪表板中点击错误时，可以查看有关它的详细信息：

### 错误上下文

- **错误消息**：浏览器或您的代码抛出的错误消息
- **错误类型**：错误的类型（例如，ReferenceError、TypeError）
- **堆栈跟踪**：错误发生时的调用堆栈
- **源代码**：错误发生的相关代码片段

### 用户上下文

- **浏览器和设备**：发生错误的浏览器、操作系统和设备
- **用户信息**：用户ID、电子邮件或其他自定义属性（如已配置）
- **地理位置**：用户所在的国家、地区和城市

### 应用程序上下文

- **URL**：发生错误的页面
- **会话ID**：发生错误的会话
- **视图ID**：发生错误的特定视图
- **自定义属性**：您配置的任何自定义属性

### 错误时间线

- **之前的操作**：错误之前的用户操作
- **相关错误**：同一会话中发生的其他错误
- **性能指标**：错误发生时间附近的性能数据

## 错误分析
---

FlashCat RUM提供几种工具帮助您分析和理解错误：

### 错误分组

类似的错误会自动分组，帮助您专注于最有影响的问题。错误基于以下内容分组：

- 错误消息和类型
- 堆栈跟踪相似性
- 源位置

### 错误趋势

跟踪一段时间内的错误趋势，以识别：

- 错误率突增，可能表明新问题
- 逐渐增加，可能表明系统性能下降
- 与部署或其他事件的相关性

### 错误影响分析

了解错误对用户和业务的影响：

- **用户影响**：每个错误影响的用户数量和百分比
- **会话影响**：错误如何影响会话持续时间和跳出率
- **转化影响**：错误如何影响转化率和业务指标

## 错误调试
---

FlashCat RUM提供几个功能帮助您调试错误：

### 会话回放

观看发生错误的用户会话录像，准确了解用户在错误发生时的操作。这有助于理解上下文并重现问题。

### 网络请求检查

查看与错误相关的网络请求详情，包括：

- 请求和响应头
- 请求负载
- 响应正文
- 时间信息

### 控制台日志

查看错误发生时用户浏览器的控制台日志。这包括：

- `console.log()`消息
- `console.warn()`消息
- `console.error()`消息

### 源映射

如果您配置了源映射，FlashCat RUM可以在堆栈跟踪中显示原始源代码而不是压缩代码，使识别错误的根本原因更容易。

## 自定义错误跟踪
---

除了自动错误跟踪外，您还可以使用RUM SDK手动跟踪错误：

```javascript
// 跟踪自定义错误
try {
  // 可能抛出错误的代码
} catch (error) {
  RumBrowser.addError(error, {
    source: 'custom',
    context: {
      // 关于错误的额外上下文
      userId: '123',
      action: 'checkout',
      cartValue: 99.99
    }
  });
}
```

您还可以跟踪带有自定义消息的错误：

```javascript
// 跟踪带有自定义消息的错误
RumBrowser.addError('支付处理失败', {
  source: 'custom',
  context: {
    paymentMethod: 'credit_card',
    amount: 99.99
  }
});
```

## 错误警报
---

FlashCat RUM允许您为错误条件设置警报：

1. 导航至 **RUM** > **应用程序** > **您的应用程序** > **警报**
2. 点击 **新建警报**
3. 选择错误指标（例如，错误率、新错误）
4. 定义阈值和条件（例如，错误率 > 1%）
5. 配置通知设置
6. 点击 **创建警报**

当警报触发时，您将通过配置的渠道（电子邮件、Slack等）收到通知。

## 错误解决工作流
---

FlashCat RUM支持错误解决工作流，帮助您跟踪和管理错误：

1. **分类**：审查新错误并根据影响确定优先级
2. **分配**：将错误分配给团队成员进行调查
3. **调查**：使用调试工具识别根本原因
4. **解决**：修复后将错误标记为已解决
5. **监控**：跟踪错误指标以确保修复有效

## 最佳实践
---

1. **设置源映射**：配置源映射，使调试压缩代码更容易
2. **添加用户上下文**：配置RUM SDK以包含用户信息，获得更好的错误上下文
3. **跟踪自定义错误**：使用SDK跟踪业务逻辑错误和其他自定义问题
4. **设置警报**：为关键错误和错误率阈值配置警报
5. **定期审查**：与团队安排定期错误审查会议
6. **错误预算**：定义可接受的错误率并将其作为SLO的一部分进行跟踪

通过利用FlashCat RUM的错误跟踪功能，您可以快速识别、诊断和修复影响用户的问题，从而提供更可靠和愉快的用户体验。
