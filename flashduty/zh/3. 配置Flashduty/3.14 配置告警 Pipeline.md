---
title: "告警处理pipeline"
description: "告警处理pipeline是FlashDuty中告警处理的核心功能，通过配置告警处理pipeline，可以实现告警的自动化处理和优化告警流程"
date: "2024-06-18T10:00:00+08:00"
url: "https://docs.flashcat.cloud/zh/flashduty/alert-pipeline"
---

告警处理 Pipeline 用于对触发的告警事件进行管理和优化，包括更新告警标题、修改告警描述、调整告警严重程度、以及执行告警过滤或抑制等操作。通过合理配置告警处理规则，可以提升告警的可读性、减少告警噪声，并提升定位问题的效率。

## 告警处理配置
---

配置路径：**集成中心** => **集成详情** => **告警处理**

- 在配置告警处理时，可以添加多个告警处理动作，FlashDuty 会按照配置的顺序依次执行告警处理动作。
- 在配置处理动作时，可以设置告警处理条件，当告警满足条件时，才会执行告警相应的处理动作。
- 每个处理动作的执行结果，都可以作为下一个处理动作的输入条件。

## 告警处理条件
---

 - 开启条件限制时，可以选择将符合条件的告警进行预处理，实现更精准、更灵活的告警处理动作。
 - 告警处理条件支持多种选择，包括告警属性的标题、描述、严重程度，告警标签，值匹配模式支持模糊匹配、精确匹配、正则匹配、数值匹配、IP段匹配。


## 告警处理动作
---

### 更新告警标题

将原告警标题修改为新的内容，新内容可以自行输入固定内容或者引用告警标签和属性以及组合的方式，引用语法可以参考 [定制故障标题](https://docs.flashcat.cloud/zh/flashduty/customize-incident-attrs) 文档内容，标题长度 **不得超过 512** 个字符。

### 更新告警描述
将原告警描述修改为新的内容，新内容可以自行输入固定内容或者引用告警标签以及组合的方式，引用方式为`{{.Labels.标签名}}`，描述长度 **不得超过 2048** 个字符。

### 更新严重程度
告警的严重程度通常依据系统预设的映射规则来确定的。现可以通过定制更新严重程度处理动作，调整告警的严重级别，从而更精准地定义告警的重要性。

### 告警过滤
告警过滤和告警静默不同之处在于静默的告警可以选择丢弃或保留且静默是针对某个协作空间生效的，无法跨协作空间静默，而告警过滤则是在集成层面将不需要处理的告警直接丢弃掉，从而减少告警处理的压力。

### 告警抑制

在特定故障情景下优化通知流程，比如当有 Critical 级别的故障，系统将抑制随后出现的 Info 或 Warning 级别相关故障的通知，以此避免信息冗余，确保焦点集中于最紧迫的问题上，实现通知的有效性和针对性。

## 使用场景和示例
---

为了便于以下示例，我们将引用一个夜莺触发的测试告警，如下所示：

```json
{
	"incident_status": "Info",
	"incident_severity": "Info",
	"title": "hm-test-告警规则名称 / Cluster-01 - demo-01",
	"description": "hm-test-告警规则名称 trigger value: 29.14912",
	"labels": {
		"__name__": "cpu_usage_idle",
		"cate": "prometheus",
		"check": "hm-test-告警规则名称",
		"cluster": "Cluster-01",
		"cpu": "cpu-total",
		"datasource_id": "4",
		"detail_url": "https://demo.flashcat.cloud/alert-his-events/4974655",
		"group_id": "1",
		"group_name": "FlashcatOps",
		"ident": "demo-01",
		"metric": "cpu_usage_idle",
		"prom_eval_interval": "10",
		"prom_ql": "cpu_usage_idle{ident=\"demo-01\"} \u003c 100",
		"region": "bj",
		"resource": "demo-01",
		"role": "master",
		"rule_id": "1041",
		"rule_prod": "metric",
		"trigger_value": "29.27852"
	}
}
```

### 场景一 ：修改告警标题

原告警标题在无法修改的情况下，默认使用的是：\$check::\$cluster::\$ident，现可以通过更新告警标题处理动作重新定义告警标题，比如使用：Labels.ident、Labels.cpu:、Labels.trigger_value 或使用告警的其他属性作为告警标题，参考语法如下：

- 固定标题格式

- 自定义分隔符

- 引用标签 + 引用告警属性 + 自定义内容 




### 场景二：更新告警描述
告警描述内容一般取的是告警规则名称加触发值，现可以通过更新告警描述处理动作，修改告警描述内容，参考语法如下：

- 固定描述内容

- 引用标签 + 引用告警属性 + 自定义内容


### 场景三：更新告警严重程度

默认情况下夜莺的三级告警对应 FlashDuty 的 Info 级别，现可以通过更新告警严重程度处理动作，调整告警的严重级别，从而更灵活定义告警的重要性。

- 将 Info 的改为 Warning

- 将部分告警的严重级别统一改为 Critical



